<?xml version="1.0"?>
<openerp>
    <data>
         <!--mrp.bom.industrial.cost.line-->
         <record model="ir.ui.view" id="view_mrp_bom_industrial_cost_line_tree">
             <field name="name">mrp.bom.industrial.cost.line.tree</field>
             <field name="model">mrp.bom.industrial.cost.line</field>
             <field name="arch" type="xml">
                 <tree string="Cost filter" editable="bottom">
                     <field name="cost_id" invisible="context.get('is_embedded', False)"/>
                     <field name="name" />
                     <field name="product_id" />
                     <field name="last_cost" />
                     <field name="last_date" />
                     <field name="qty" />
                     <field name="uom_id" />
                     <!--<field name="cost" />-->                     
                 </tree>
             </field>
         </record>         
         <record model="ir.ui.view" id="view_mrp_bom_industrial_cost_line_form">
             <field name="name">mrp.bom.industrial.cost.line.form</field>
             <field name="model">mrp.bom.industrial.cost.line</field>
             <field name="arch" type="xml">
                 <form string="Cost filter">
                     <field name="cost_id" />
                     <field name="name" />
                     <field name="product_id" />
                     <field name="last_cost" />
                     <field name="last_date" />
                     <field name="qty" />
                     <field name="uom_id" />
                     <!--<field name="cost" />-->                     
                 </form>
             </field>
         </record>
         <record model="ir.ui.view" id="view_mrp_bom_industrial_cost_line_search">
             <field name="name">mrp.bom.industrial.cost.line.search</field>
             <field name="model">mrp.bom.industrial.cost.line</field>
             <field name="arch" type="xml">
                 <search string="Cost line" version="7.0">        
                     <field name="name" />
                     <field name="cost_id" />
                     <field name="product_id" string="Codice prodotto" filter_domain="[('product_id.default_code','ilike',self)]"/>
                     <!--<filter name="cost_0" string="No cost" domain="[('cost','=',0)]"/>-->
                     <group expand="0" string="Group By...">
                         <filter name="group_cost" string="Cost" context="{'group_by': 'cost_id'}"/>
                         <filter name="group_product" string="Prodotto" context="{'group_by': 'product_id'}"/>
                     </group>                
                 </search>
             </field>
         </record>
         
         <record model="ir.actions.act_window" id="action_mrp_bom_industrial_cost_line">
             <field name="name">Cost detail</field>
             <field name="res_model">mrp.bom.industrial.cost.line</field>
             <field name="view_type">form</field>
             <field name="view_mode">tree,form</field>
             <field name="view_id" ref="view_mrp_bom_industrial_cost_line_tree"/>
             <field name="context">{}</field>
             <field name="domain">[]</field>
         </record>

         <!--mrp.bom.industrial.cost-->
         <record model="ir.ui.view" id="view_mrp_bom_industrial_cost_tree">
             <field name="name">mrp.bom.industrial.cost.tree</field>
             <field name="model">mrp.bom.industrial.cost</field>
             <field name="arch" type="xml">
                 <tree string="Industrial cost">
                     <field name="name" />
                     <button name="open_load_detail_list" string="Detail list" type="object" colspan="1" icon="gtk-goto-last"/>
                 </tree>
             </field>
         </record>
         <record model="ir.ui.view" id="view_mrp_bom_industrial_cost_form">
             <field name="name">mrp.bom.industrial.cost.tree</field>
             <field name="model">mrp.bom.industrial.cost</field>
             <field name="arch" type="xml">
                 <form string="Industrial cost">
                     <group colspan="4" col="4">
                         <field name="name" />
                         <field name="unit_cost" />
                         <!--<field name="default_cost" />-->
                         <separator string="Detail:" colspan="2"/>
                         <!--<button name="load_detail_from_BOM" string="Load BOM selected" type="object" colspan="1" icon="gtk-refresh"/>-->
                         <button name="open_load_detail_list" string="Detail list" type="object" colspan="1" icon="gtk-goto-last"/>
                         <field name="line_ids" colspan="4" col="4" nolabel="1" context="{'is_embedded': True}"/>
                     </group>    
                 </form>
             </field>
         </record>
         <record model="ir.actions.act_window" id="action_mrp_bom_industrial_cost">
             <field name="name">Industrial cost</field>
             <field name="res_model">mrp.bom.industrial.cost</field>
             <field name="view_type">form</field>
             <field name="view_mode">tree,form</field>
             <field name="view_id" ref="view_mrp_bom_industrial_cost_tree"/>
             <field name="context">{}</field>
             <field name="domain">[]</field>
         </record>
         
         <record model="ir.ui.view" id="view_product_bom_selection_search">
             <field name="name">product.product.search</field>
             <field name="model">product.product</field>
             <field name="priority" eval="50" />
             <field name="arch" type="xml">
                 <search string="Product" version="7.0">        
                     <field name="default_code" />
                     <field name="name" />
                     <filter name="bom_selection_on" string="Selected" domain="[('bom_selection','=',True)]"/>
                     <filter name="bom_selection_off" string="Not selected" domain="[('bom_selection','=',False)]"/>
                     <group expand="0" string="Group By...">
                         <filter name="group_bom_selection" string="BOM" context="{'group_by': 'bom_selection'}"/>
                     </group>                
                 </search>
             </field>
         </record>
         <record model="ir.ui.view" id="view_product_bom_selection_tree">
             <field name="name">product.product.bom.selection.tree</field>
             <field name="model">product.product</field>
             <field name="priority" eval="50" />
             <field name="arch" type="xml">
                 <tree string="BOM selection" editable="bottom" colors="red:bom_selection==True and industrial_missed==False">
                     <field name="industrial_missed" invisible="1"/>
                     <field name="bom_selection" invisible="1"/>
                     <field name="name" />
                     <field name="default_code" />
                     <button name="open_current_dynamic_bom" string="Manage dynamic lines" type="object" icon="gtk-justify-fill"/>
                     <field name="from_industrial" />
                     <field name="to_industrial" />
                     <field name="state" invisible="1" />
                     <button name="bom_selection_on" string="Set BOM on" type="object" icon="star-off" attrs="{'invisible': [('bom_selection','=',True)]}"/>
                     <button name="bom_selection_off" string="Set BOM off" type="object" icon="star-on" attrs="{'invisible': [('bom_selection','=',False)]}"/> 
                     <button name="open_single_report" string="Print single" type="object" icon="gtk-print" attrs="{'invisible': [('bom_selection','=',False)]}"/>
                     <button name="open_multi_report" string="Print all" type="object" icon="gtk-dnd-multiple" attrs="{'invisible': [('bom_selection','=',False)]}"/>
                     <button name="open_xls_report" string="Export XLSX" type="object" icon="terp-go-month" attrs="{'invisible': [('bom_selection','=',False)]}"/>
                 </tree>
             </field>
         </record>
         <record model="ir.actions.act_window" id="action_product_bom_selection_tree">
             <field name="name">Product BOM selection</field>
             <field name="res_model">product.product</field>
             <field name="view_type">form</field>
             <field name="view_mode">tree,form</field>
             <field name="view_id" ref="view_product_bom_selection_tree"/>
             <field name="search_view_id" ref="view_product_bom_selection_search"/>
             <field name="context">{'search_default_bom_selection_on': True,}</field>
             <field name="domain">[]</field>
         </record>
         <menuitem 
             parent="mrp.menu_mrp_bom" 
             id="menu_product_bom_selection_root" 
             name="Product cost from BOM"
             string="Prova"
             sequence="50"
             groups="bom_industrial_cost_report.group_bom_cost_manager"
             />
             <menuitem 
                 parent="menu_product_bom_selection_root" 
                 id="menu_product_bom_selection_tree" 
                 action="action_product_bom_selection_tree"
                 sequence="10"
                 />
             <menuitem 
                 parent="menu_product_bom_selection_root" 
                 id="menu_mrp_bom_industrial_cost" 
                 action="action_mrp_bom_industrial_cost"
                 sequence="90"
                 />
             <menuitem 
                 parent="menu_product_bom_selection_root" 
                 id="menu_mrp_bom_industrial_cost_line" 
                 action="action_mrp_bom_industrial_cost_line"
                 sequence="99"
                 />
                 
    </data>
</openerp>

