<?xml version="1.0"?>
<openerp>
    <data>        
        <record model="ir.ui.view" id="view_mrp_production_stats_line_tree">
            <field name="name">MRP Stats for line</field>
            <field name="model">mrp.production.stats</field>
            <field name="priority" eval="40"/>
            <field name="arch" type="xml">
                <tree string="MRP stats">
	                <field name="workcenter_id"/>
	                <field name="date" />
	                <field name="workers" />
	                <field name="startup" widget="float_time" />
	                <field name="hour" widget="float_time" />
	                <field name="total" />
                    <field name="working_done" invisible="1"/>
                    <button name="working_mark_done" string="Close Day" type="object" class="oe_highlight" attrs="{'invisible': [('working_done','=',True)]}"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="view_mrp_production_stats_line_form">
            <field name="name">MRP Stats for line</field>
            <field name="model">mrp.production.stats</field>
            <field name="inherit_id" ref="production_accounting_external_stats.view_mrp_production_stats_form"/>
            <field name="arch" type="xml">
                <sheet position="before">
                    <header>
                        <button name="working_print_all_label" string="Print all label" type="object" icon="STOCK_PRINT"/>
                        <button name="working_mark_done" string="Close Day" type="object" class="oe_highlight" attrs="{'invisible': [('working_done','=',True)]}"/>
                        <field name="working_done"  invisible="1"/>
                    </header>                    
                </sheet>
                <field name="total" position="after">
                    <separator string="Production" colspan="4"/>
                    <field name="working_ids" colspan="4" nolabel="1" >
                        <tree colors="green:working_mark_done==True" editable="bottom">
                            <!--Button for unlink-->
                            <field name="working_sequence" />
                            <field name="partner_id" readonly="1"/>
                            <field name="default_code" readonly="1" />
                            <field name="product_uom_qty" readonly="1" />
                            <field name="delivered_qty" readonly="1" />
                            <field name="working_qty" />
                            <!--Button for force all-->
                            <field name="product_uom_maked_sync_qty" />
                            <field name="production_note" />
                            <button name="working_print_single_label" string="Print label" type="object" icon="STOCK_PRINT"/>                        
                            <button name="working_mark_done" string="Done" type="object" icon="gtk-ok"/>                        
                        </tree>    
                    </field>
                </field>
            </field>
        </record>
        <record model="ir.ui.view" id="view_mrp_production_stats_for_line_form">
           <field name="name">MRP Stats for line</field>
            <field name="model">mrp.production.stats</field>
            <field name="arch" type="xml">
                <form string="String" version="7.0">        
                    <sheet>
                        <group col="4" colspan="4">
                            <field name="workcenter_id" />                            
                            <field name="date" />
                            
                        </group>
                    </sheet>        
                </form>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_day_open_working_manager">
            <field name="name">Work days open</field>
            <field name="res_model">mrp.production.stats</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_mrp_production_stats_line_tree"/>
            <field name="context">{}</field>
            <field name="domain">[('working_done', '=', False)]</field>
        </record>
        <record model="ir.actions.act_window" id="action_day_open_working_4_line">
            <field name="name">Work days for line</field>
            <field name="res_model">mrp.production.stats</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_mrp_production_stats_line_tree"/>
            <field name="context">{'form_view_ref': 'mrp_direct_line.view_mrp_production_stats_for_line_form'}</field>
            <field name="domain">[('working_done', '=', False)]</field>
            <field name="auto_refresh">10</field>
        </record>
    
        <menuitem 
            parent="mrp.menu_mrp_manufacturing"
            id="menu_mrp_manufacturing_line_root" 
            sequence="40"
            name="Line management"
            />        
            <menuitem 
                parent="menu_mrp_manufacturing_line_root"
                id="menu_mrp_manufacturing_line_days" 
                sequence="20"
                action="action_day_open_working_manager"
                name="Working days"
                />        
            <menuitem 
                parent="menu_mrp_manufacturing_line_root"
                id="menu_mrp_manufacturing_line_for_line_days" 
                sequence="30"
                action="action_day_open_working_4_line"
                name="Working days for line"
                />        
            
    </data>
</openerp>

