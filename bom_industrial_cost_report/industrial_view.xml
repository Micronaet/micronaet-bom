<?xml version="1.0"?>
<openerp>
    <data>
         <record model="ir.ui.view" id="view_product_bom_selection_search">
             <field name="name">product.product.search</field>
             <field name="model">product.product</field>
             <field name="priority" eval="50" />
             <field name="arch" type="xml">
                 <search string="Product" version="7.0">        
                     <field name="default_code" />
                     <field name="name" />
                     <filter name="bom_selection_on" string="Selected" domain="[('bom_selection','=',True)]"/>
                     <filter name="bom_selection_off" string="Not selected" domain="[('bom_selection','=',False)]"/>
                     <group expand="0" string="Group By...">
                         <filter name="group_bom_selection" string="BOM" context="{'group_by': 'bom_selection'}"/>
                     </group>                
                 </search>
             </field>
         </record>
         <record model="ir.ui.view" id="view_product_bom_selection_tree">
             <field name="name">product.product.bom.selection.tree</field>
             <field name="model">product.product</field>
             <field name="priority" eval="50" />
             <field name="arch" type="xml">
                 <tree string="BOM selection" editable="bottom" color="blue:bom_selection==True">        
                     <field name="bom_selection" invisible="1"/>
                     <field name="name" />
                     <field name="default_code" />
                     <button name="open_current_dynamic_bom" string="Manage dynamic lines" type="object" icon="gtk-justify-fill"/>
                     <field name="from_industrial" />
                     <field name="to_industrial" />
                     <field name="state" invisible="1" />
                     <button name="bom_selection_on" string="Set BOM on" type="object" icon="star-off" attrs="{'invisible': [('bom_selection','=',True)]}"/>
                     <button name="bom_selection_off" string="Set BOM off" type="object" icon="star-on" attrs="{'invisible': [('bom_selection','=',False)]}"/> 
                     <button name="open_single_report" string="Print single" type="object" icon="gtk-print" attrs="{'invisible': [('bom_selection','=',False)]}"/>
                     <button name="open_multi_report" string="Print all" type="object" icon="gtk-dnd-multiple" attrs="{'invisible': [('bom_selection','=',False)]}"/>
                 </tree>
             </field>
         </record>
         <record model="ir.actions.act_window" id="action_product_bom_selection_tree">
             <field name="name">Product BOM selection</field>
             <field name="res_model">product.product</field>
             <field name="view_type">form</field>
             <field name="view_mode">tree,form</field>
             <field name="view_id" ref="view_product_bom_selection_tree"/>
             <field name="search_view_id" ref="view_product_bom_selection_search"/>             
             <field name="context">{}</field>
             <field name="domain">[]</field>
         </record>
         <menuitem 
             parent="mrp.menu_mrp_bom" 
             id="menu_product_bom_selection_root" 
             name="Product cost from BOM"
             string="Prova"
             sequence="50"
             groups="bom_industrial_cost_report.group_bom_cost_manager"
             />
             <menuitem 
                 parent="menu_product_bom_selection_root" 
                 id="menu_product_bom_selection_tree" 
                 action="action_product_bom_selection_tree"
                 sequence="10"
                 />
    </data>
</openerp>

